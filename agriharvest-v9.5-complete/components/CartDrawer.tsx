'use client'
import { useCart } from '@/contexts/cart'
import { openPaymentModal, isRazorpayEnabled } from '@/lib/razorpay'
export default function CartDrawer(){ const { cart, total, clearCart } = useCart(); return (<aside className='fixed right-0 top-0 h-full w-full md:w-96 bg-[var(--card)] p-4'><h2 className='text-xl font-semibold'>Your Cart</h2><div className='mt-4 space-y-3'>{cart.length===0? <div className='py-12 text-center'>Cart is empty</div> : cart.map(i=> (<div key={i.id} className='flex items-center gap-3 card p-3'><img src={i.image} className='w-16 h-16 object-cover rounded' /><div className='flex-1'><div className='font-semibold'>{i.name}</div><div className='text-sm text-[var(--muted)]'>₹{i.price} x {i.qty}</div></div></div>))}</div><div className='mt-6'><div className='font-semibold'>Total: ₹{total}</div><div className='mt-4 flex gap-2'><button disabled={!isRazorpayEnabled} onClick={()=> openPaymentModal({ amount: total })} className='btn btn-primary w-full'>{isRazorpayEnabled? 'Pay Now': 'Payment Disabled'}</button><button onClick={clearCart} className='btn border w-full'>Clear</button></div></div></aside>) }
