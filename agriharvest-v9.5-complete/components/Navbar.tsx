'use client'
import Link from 'next/link'
import { useTheme } from 'next-themes'
import { Sun, Moon, ShoppingCart } from 'lucide-react'
import { useState } from 'react'
import { useCart } from '@/contexts/cart'
import { useAuth } from '@/contexts/auth'
export default function Navbar(){ const { theme, setTheme } = useTheme(); const { cart } = useCart(); const { user, logout } = useAuth(); const [open, setOpen] = useState(false); return (<header className='bg-transparent sticky top-0 z-50'><div className='container flex items-center justify-between h-[72px]'><Link href='/' className='flex items-center gap-3'><div className='w-12 h-12 rounded-full bg-gradient-to-br from-yellow-300 to-orange-400 flex items-center justify-center font-bold'>AH</div><div><div className='font-semibold text-lg'>AgriHarvest</div><div className='text-xs text-[var(--muted)]'>Sustainable produce</div></div></Link><nav className='hidden md:flex items-center gap-6'><Link href='/products' className='hover:underline'>Products</Link><Link href='/about' className='hover:underline'>About</Link><Link href='/contact' className='hover:underline'>Contact</Link><Link href='/cart' className='relative inline-flex items-center gap-2'><ShoppingCart className='w-5 h-5' /><span>Cart</span>{cart.length>0 && <span className='ml-2 bg-[var(--accent)] text-black px-2 py-0.5 rounded text-xs'>{cart.length}</span>}</Link><button onClick={()=> setTheme(theme==='dark'?'light':'dark')} className='p-2 rounded bg-[var(--card)]'>{theme==='dark'?<Sun className='w-5 h-5'/>:<Moon className='w-5 h-5'/>}</button>{user? <div className='flex items-center gap-3'><span className='text-sm'>Hi, {user.name}</span><button onClick={logout} className='text-sm text-red-500'>Logout</button></div>:<div className='flex items-center gap-3'><Link href='/login'>Login</Link><Link href='/signup' className='btn btn-primary'>Sign up</Link></div>}</nav><div className='md:hidden flex items-center gap-2'><button onClick={()=> setTheme(theme==='dark'?'light':'dark')} className='p-2 rounded'>{theme==='dark'?'ðŸŒž':'ðŸŒ™'}</button><button onClick={()=> setOpen(v=>!v)} className='p-2 rounded'>â˜°</button></div></div>{open && (<div className='md:hidden bg-[var(--card)] border-t'><div className='container py-4 flex flex-col gap-3'><Link href='/products'>Products</Link><Link href='/about'>About</Link><Link href='/contact'>Contact</Link><Link href='/cart'>Cart</Link><Link href='/login'>Login</Link><Link href='/signup' className='btn btn-primary'>Sign up</Link></div></div>)}</header>) }
